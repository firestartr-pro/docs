<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="ğŸ” Overview# This repository is dedicated to managing system services for Kubernetes clusters, referred to as sys-services. These services are critical components that ensure the smooth operation of the Kubernetes clusters, such as ingress controllers, configuration reloading utilities (e.g., Stakater Reloader), and other essential utilities.
The repository centralizes all sys-service definitions and deployment configurations to ensure consistency, manageability, and automation across multiple Kubernetes clusters.
ğŸ“‚ Structure of the repository# The repository is organized into a hierarchical folder structure to map services to clusters:
"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://docs.firestartr.dev/docs/state-sys-services-repository/"><meta property="og:site_name" content="Firestartr Documentation"><meta property="og:title" content="Firestartr Documentation"><meta property="og:description" content="ğŸ” Overview# This repository is dedicated to managing system services for Kubernetes clusters, referred to as sys-services. These services are critical components that ensure the smooth operation of the Kubernetes clusters, such as ingress controllers, configuration reloading utilities (e.g., Stakater Reloader), and other essential utilities.
The repository centralizes all sys-service definitions and deployment configurations to ensure consistency, manageability, and automation across multiple Kubernetes clusters.
ğŸ“‚ Structure of the repository# The repository is organized into a hierarchical folder structure to map services to clusters:"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta itemprop=name content="Firestartr Documentation"><meta itemprop=description content="ğŸ” Overview# This repository is dedicated to managing system services for Kubernetes clusters, referred to as sys-services. These services are critical components that ensure the smooth operation of the Kubernetes clusters, such as ingress controllers, configuration reloading utilities (e.g., Stakater Reloader), and other essential utilities.
The repository centralizes all sys-service definitions and deployment configurations to ensure consistency, manageability, and automation across multiple Kubernetes clusters.
ğŸ“‚ Structure of the repository# The repository is organized into a hierarchical folder structure to map services to clusters:"><meta itemprop=wordCount content="595"><title>State Sys Services Repository | Firestartr Documentation</title><link rel=icon href=/docs/favicon.png><link rel=manifest href=/docs/manifest.json><link rel=canonical href=https://docs.firestartr.dev/docs/state-sys-services-repository/><link rel=stylesheet href=/docs/book.min.cc2c524ed250aac81b23d1f4af87344917b325208841feca0968fe450f570575.css integrity="sha256-zCxSTtJQqsgbI9H0r4c0SRezJSCIQf7KCWj+RQ9XBXU=" crossorigin=anonymous><script defer src=/docs/fuse.min.js></script><script defer src=/docs/en.search.min.27ea268489c4afe5460ac64c12852404231f9abe51a238c074a89899891f1487.js integrity="sha256-J+omhInEr+VGCsZMEoUkBCMfmr5RojjAdKiYmYkfFIc=" crossorigin=anonymous></script></head><body dir=ltr class="book-kind-page book-type-page"><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/docs/><span>Firestartr Documentation</span></a></h2><div class="book-search hidden"><input id=book-search-input type=text placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=/docs/Migrating-to-our-new-app-state-repo-structure/>Migrating to Our New App State Repo Structure</a></li><li><input type=checkbox id=section-77ba58481c81cfcc87f14a72108199d0 class=toggle>
<label for=section-77ba58481c81cfcc87f14a72108199d0 class=flex><a href=/docs/providers/>Providers</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><input type=checkbox id=section-b1b6ec47a00c93e67ba6b7835cfc5cbb class=toggle>
<label for=section-b1b6ec47a00c93e67ba6b7835cfc5cbb class=flex><a href=/docs/providers/terraform/>Terraform</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/providers/terraform/workspace-policies/>Workspace Policies</a></li><li><a href=/docs/providers/terraform/workspace-sync/>Workspace Sync</a></li></ul></li></ul></li><li><a href=/docs/state-apps-repository/>State Apps Repository</a></li><li><a href=/docs/state-sys-services-repository/ class=active>State Sys Services Repository</a></li><li><a href=/docs/The-dot-firestartr-repository/>The Dot Firestartr Repository</a></li><li><a href=/docs/Validating-our-claims/>Validating Our Claims</a></li><li><input type=checkbox id=section-59625c6804349fe2bfba21980f88c1e3 class=toggle>
<label for=section-59625c6804349fe2bfba21980f88c1e3 class=flex><a href=/docs/features/>Features</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><input type=checkbox id=section-175a6acb21b23225ad6bb7d217c9122e class=toggle>
<label for=section-175a6acb21b23225ad6bb7d217c9122e class=flex><a href=/docs/features/build_and_dispatch_docker_images/>Build and Dispatch Docker Images</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/features/build_and_dispatch_docker_images/CHANGELOG/>Changelog</a></li></ul></li><li><input type=checkbox id=section-39ffb35bc31c80c3835fb6d107d8f566 class=toggle>
<label for=section-39ffb35bc31c80c3835fb6d107d8f566 class=flex><a href=/docs/features/catalog_repo/>Catalog Repo</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/features/catalog_repo/CHANGELOG/>Changelog</a></li></ul></li><li><input type=checkbox id=section-6b57e3023d9f976a9384af45ac1defa0 class=toggle>
<label for=section-6b57e3023d9f976a9384af45ac1defa0 class=flex><a href=/docs/features/charts_repo/>Charts Repo</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/features/charts_repo/CHANGELOG/>Changelog</a></li></ul></li><li><input type=checkbox id=section-b6a186066fe5df06a19368fd8c4e2996 class=toggle>
<label for=section-b6a186066fe5df06a19368fd8c4e2996 class=flex><a href=/docs/features/claims_repo/>Claims Repo</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/features/claims_repo/CHANGELOG/>Changelog</a></li></ul></li><li><input type=checkbox id=section-38807a9873b684081175bcfa2c2cf899 class=toggle>
<label for=section-38807a9873b684081175bcfa2c2cf899 class=flex><a href=/docs/features/features_repo/>Features Repo</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/features/features_repo/CHANGELOG/>Changelog</a></li></ul></li><li><input type=checkbox id=section-b095c0174f431275dbfbd179b858882c class=toggle>
<label for=section-b095c0174f431275dbfbd179b858882c class=flex><a href=/docs/features/firestartr_repo/>Firestartr Repo</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/features/firestartr_repo/CHANGELOG/>Changelog</a></li></ul></li><li><input type=checkbox id=section-8c74538169d2bfcc42048e94a7a8b10f class=toggle>
<label for=section-8c74538169d2bfcc42048e94a7a8b10f class=flex><a href=/docs/features/issue_templates/>Issue Templates</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/features/issue_templates/CHANGELOG/>Changelog</a></li></ul></li><li><input type=checkbox id=section-356bba00636a6fa9c561ac1523b4c383 class=toggle>
<label for=section-356bba00636a6fa9c561ac1523b4c383 class=flex><a href=/docs/features/release_please/>Release Please</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/features/release_please/CHANGELOG/>Changelog</a></li></ul></li><li><input type=checkbox id=section-17190a34986f329bfce42d3c100d77a8 class=toggle>
<label for=section-17190a34986f329bfce42d3c100d77a8 class=flex><a href=/docs/features/state_github/>State Github</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/features/state_github/CHANGELOG/>Changelog</a></li></ul></li><li><input type=checkbox id=section-5f9553708125dcb2260eaa1dc68fa4b3 class=toggle>
<label for=section-5f9553708125dcb2260eaa1dc68fa4b3 class=flex><a href=/docs/features/state_infra/>State Infra</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/features/state_infra/CHANGELOG/>Changelog</a></li></ul></li><li><input type=checkbox id=section-5cfdf617da323132dc220c8cdac15345 class=toggle>
<label for=section-5cfdf617da323132dc220c8cdac15345 class=flex><a href=/docs/features/state_repo/>State Repo</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/features/state_repo/CHANGELOG/>Changelog</a></li></ul></li><li><input type=checkbox id=section-ed9c88a7368e2738f3eb675492c08586 class=toggle>
<label for=section-ed9c88a7368e2738f3eb675492c08586 class=flex><a href=/docs/features/state_repo_apps/>State Repo Apps</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/features/state_repo_apps/KUBERNETES_README/>Kubernetes Readme</a></li><li><a href=/docs/features/state_repo_apps/SECRETS_README/>Secrets Readme</a></li><li><a href=/docs/features/state_repo_apps/TFWORKSPACES_README/>Tfworkspaces Readme</a></li><li><a href=/docs/features/state_repo_apps/CHANGELOG/>Changelog</a></li></ul></li><li><input type=checkbox id=section-9b5377154045b7f8613471f4d8281e78 class=toggle>
<label for=section-9b5377154045b7f8613471f4d8281e78 class=flex><a href=/docs/features/state_repo_sys_services/>State Repo Sys Services</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/features/state_repo_sys_services/CHANGELOG/>Changelog</a></li></ul></li><li><input type=checkbox id=section-36ec9bd0ed3955d6fa86995304f3f940 class=toggle>
<label for=section-36ec9bd0ed3955d6fa86995304f3f940 class=flex><a href=/docs/features/tech_docs/>Tech Docs</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/features/tech_docs/CHANGELOG/>Changelog</a></li></ul></li><li><input type=checkbox id=section-85da29a6eded009fe28c389b53dac15e class=toggle>
<label for=section-85da29a6eded009fe28c389b53dac15e class=flex><a href=/docs/features/terraform-infra/>Terraform Infra</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/features/terraform-infra/ACCOUNTS_README/>Accounts Readme</a></li><li><a href=/docs/features/terraform-infra/CHANGELOG/>Changelog</a></li></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class="book-header hidden"><div class="flex align-center justify-between"><label for=menu-control><img src=/docs/icons/menu.svg class=book-icon alt=Menu></label><h3>State Sys Services Repository</h3><label for=toc-control><img src=/docs/icons/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class=hidden><nav id=TableOfContents><ul><li><a href=#-structure-of-the-repository>ğŸ“‚ Structure of the repository</a><ul><li><a href=#-main-or-master-branch>ğŸŒ± <code>main</code> (or <code>master</code>) branch</a></li><li><a href=#-deployment-branch>ğŸš€ <code>deployment</code> branch</a></li></ul></li><li><a href=#-applicationsets-and-appprojects-per-sys-service>ğŸ—‚ï¸ ApplicationSets and AppProjects per Sys-Service</a><ul><li><a href=#-applicationset-per-sys-service>ğŸ“¦ ApplicationSet per Sys-Service</a></li><li><a href=#-appproject-per-sys-service>ğŸ› ï¸ AppProject per Sys-Service</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=-overview>ğŸ” Overview<a class=anchor href=#-overview>#</a></h1><p>This repository is dedicated to managing system services for Kubernetes clusters, referred to as sys-services. These services are critical components that ensure the smooth operation of the Kubernetes clusters, such as ingress controllers, configuration reloading utilities (e.g., Stakater Reloader), and other essential utilities.</p><p>The repository centralizes all sys-service definitions and deployment configurations to ensure consistency, manageability, and automation across multiple Kubernetes clusters.</p><h2 id=-structure-of-the-repository>ğŸ“‚ Structure of the repository<a class=anchor href=#-structure-of-the-repository>#</a></h2><p>The repository is organized into a hierarchical folder structure to map services to clusters:</p><h3 id=-main-or-master-branch>ğŸŒ± <code>main</code> (or <code>master</code>) branch<a class=anchor href=#-main-or-master-branch>#</a></h3><p>The main branch contains configuration files for sys-services. These files include values.yaml or similar templates that define the input parameters and settings required for generating Kubernetes manifests.</p><ul><li><strong>Purpose</strong>: Acts as the source of truth for configuration data. It allows developers to manage high-level settings without directly interacting with raw Kubernetes manifests.</li><li><strong>Structure</strong>:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubernetes-sys-services/
</span></span><span style=display:flex><span>  â”œâ”€â”€ &lt;cluster-name&gt;/
</span></span><span style=display:flex><span>  â”‚      â”œâ”€â”€ &lt;service-name&gt;.yaml
</span></span><span style=display:flex><span>  â”‚      â”œâ”€â”€ &lt;service-name&gt;/
</span></span><span style=display:flex><span>  â”‚      â”‚      â”œâ”€â”€ values.yaml
</span></span><span style=display:flex><span>  â”œâ”€â”€ another-cluster/
</span></span><span style=display:flex><span>  â”‚      â””â”€â”€ another-service/</span></span></code></pre></div><p>Each service requires a configuration file at the following path <em>kubernetes-sys-services//.yaml</em> with the following structure:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>chart</span>: <span style=color:#ae81ff>&lt;alias&gt;/&lt;chart-name&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>registry</span>: <span style=color:#ae81ff>&lt;registry_url&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#ae81ff>&lt;version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>releaseName</span>: <span style=color:#ae81ff>&lt;release_name&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>hooks</span>: []
</span></span><span style=display:flex><span><span style=color:#f92672>extraPatches</span>: []</span></span></code></pre></div><h3 id=-deployment-branch>ğŸš€ <code>deployment</code> branch<a class=anchor href=#-deployment-branch>#</a></h3><p>The deployment branch contains raw Kubernetes manifests that are generated based on the configurations from the main branch. These manifests are directly applied to the Kubernetes clusters by ArgoCD.</p><ul><li><p><strong>Purpose</strong>: Provides the final rendered Kubernetes objects that ArgoCD can deploy to clusters. These are the manifests ArgoCD synchronizes with the clusters.</p></li><li><p><strong>Structure</strong>:</p></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubernetes-sys-services/
</span></span><span style=display:flex><span>  â”œâ”€â”€ &lt;cluster-name&gt;/
</span></span><span style=display:flex><span>  â”‚      â”œâ”€â”€ &lt;service-name&gt;/
</span></span><span style=display:flex><span>  â”‚      â”‚      â”œâ”€â”€ Deployment.&lt;metadata.name&gt;.yaml
</span></span><span style=display:flex><span>  â”‚      â”‚      â”œâ”€â”€ Configmap.&lt;metada.name&gt;.yaml
</span></span><span style=display:flex><span>  â”‚      â”‚      â””â”€â”€ ...other-resources
</span></span><span style=display:flex><span>  â”œâ”€â”€ another-cluster/
</span></span><span style=display:flex><span>  â”‚      â””â”€â”€ another-service/</span></span></code></pre></div><h2 id=-applicationsets-and-appprojects-per-sys-service>ğŸ—‚ï¸ ApplicationSets and AppProjects per Sys-Service<a class=anchor href=#-applicationsets-and-appprojects-per-sys-service>#</a></h2><p>In this setup, each sys-service has its own ApplicationSet and AppProject, providing granular control over deployments and ensuring clear separation of concerns between services.</p><h3 id=-applicationset-per-sys-service>ğŸ“¦ ApplicationSet per Sys-Service<a class=anchor href=#-applicationset-per-sys-service>#</a></h3><p>Each sys-service is managed by a dedicated ApplicationSet, which is responsible for dynamically creating and managing ArgoCD applications for that service across all relevant clusters.</p><ul><li><strong>Dynamic Application Generation:</strong>
The ApplicationSet scans the deployment branch and generates ArgoCD Applications for each / path.</li><li><strong>Granularity:</strong>
Each sys-service has its own ApplicationSet, which keeps configurations modular and easy to manage.</li><li><strong>Scalability:</strong>
Adding a new sys-service requires only a new ApplicationSet definition, making the system easily extendable.</li><li><strong>Cluster Mapping:</strong>
The ApplicationSet uses folder paths to map clusters and services, ensuring deployments target the correct clusters without manual intervention.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>argoproj.io/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ApplicationSet</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>state-sys-service-&lt;sys-service-name&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>argocd</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>generators</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>git</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>directories</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>path</span>: <span style=color:#ae81ff>kubernetes-sys-services/*/*</span> <span style=color:#75715e># kubernetes-sys-services/cluster/service</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>repoURL</span>: <span style=color:#ae81ff>https://github.com/&lt;org&gt;/state-sys-services.git</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>revision</span>: <span style=color:#ae81ff>deployment</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>values</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>central-aks</span>: <span style=color:#ae81ff>https://kubernetes.default.svc</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>goTemplate</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>goTemplateOptions</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>missingkey=error</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;{{index .path.segments 1}}-{{index .path.segments 2}}&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>app-name</span>: <span style=color:#e6db74>&#39;&lt;application-name&gt;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>destination</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>namespace</span>: <span style=color:#e6db74>&#39;kube-system&#39;</span> <span style=color:#75715e># specific namespace for the sys-service</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>server</span>: <span style=color:#e6db74>&#39;{{index .values (index .path.segments 1)}}&#39;</span> <span style=color:#75715e># server</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>project</span>: <span style=color:#e6db74>&#39;&lt;sys-service-name&gt;&#39;</span> <span style=color:#75715e># one project for each sys-service</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>source</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>path</span>: <span style=color:#e6db74>&#39;{{index .path.segments 0}}/{{index .path.segments 1}}/{{index .path.segments 2}}&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>repoURL</span>: <span style=color:#ae81ff>https://github.com/&lt;org&gt;/state-sys-services.git</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>targetRevision</span>: <span style=color:#ae81ff>deployment</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>syncPolicy</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>automated</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>prune</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>syncOptions</span>:
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>CreateNamespace=true</span></span></span></code></pre></div><h3 id=-appproject-per-sys-service>ğŸ› ï¸ AppProject per Sys-Service<a class=anchor href=#-appproject-per-sys-service>#</a></h3><p>Every sys-service is assigned a dedicated AppProject, which defines the scope, permissions, and boundaries for the applications generated by its ApplicationSet.</p><ul><li><strong>Isolated Scope:</strong> Each sys-service operates within its own AppProject, preventing interference between different services.</li><li><strong>Source and Destination Restrictions:</strong><ul><li>The AppProject limits:<ul><li>Source Repositories: Only allows applications to use the specific sys-services repository.</li><li>Destinations: Restricts deployments to the kube-system namespace in the permitted clusters.</li></ul></li></ul></li><li><strong>Security:</strong> Ensures that no sys-service can deploy outside its intended scope, reducing the risk of misconfigurations or unauthorized access.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>argoproj.io/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>AppProject</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>&lt;sys-service-name&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>argocd</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span>: <span style=color:#e6db74>&#39;Project for &lt;sys-service-name&gt;&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>sourceRepos</span>:
</span></span><span style=display:flex><span>  - <span style=color:#e6db74>&#34;https://github.com/&lt;org&gt;/state-sys-services&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>destinations</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>namespace</span>: <span style=color:#e6db74>&#34;{kube-system}&#34;</span> <span style=color:#75715e># &lt;- allowed namespaces</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>server</span>: <span style=color:#ae81ff>&gt;- </span>
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>https://kubernetes.default.svc,</span>
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>https://kubernetes.another.svc </span>
</span></span><span style=display:flex><span>      }</span></span></code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div></div><div></div></div><div class="flex flex-wrap justify-between"><span><a href=/docs/state-apps-repository/ class="flex align-center"><img src=/docs/icons/backward.svg class=book-icon alt=Backward>
<span>State Apps Repository</span>
</a></span><span><a href=/docs/The-dot-firestartr-repository/ class="flex align-center"><span>The Dot Firestartr Repository</span>
<img src=/docs/icons/forward.svg class=book-icon alt=Forward></a></span></div><script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#-structure-of-the-repository>ğŸ“‚ Structure of the repository</a><ul><li><a href=#-main-or-master-branch>ğŸŒ± <code>main</code> (or <code>master</code>) branch</a></li><li><a href=#-deployment-branch>ğŸš€ <code>deployment</code> branch</a></li></ul></li><li><a href=#-applicationsets-and-appprojects-per-sys-service>ğŸ—‚ï¸ ApplicationSets and AppProjects per Sys-Service</a><ul><li><a href=#-applicationset-per-sys-service>ğŸ“¦ ApplicationSet per Sys-Service</a></li><li><a href=#-appproject-per-sys-service>ğŸ› ï¸ AppProject per Sys-Service</a></li></ul></li></ul></nav></div></aside></main></body></html>